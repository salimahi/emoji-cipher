<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emoji Cipher‚Ñ¢ ‚Äì Puzzle</title>
  <meta name="description" content="Emoji Cipher‚Ñ¢ is an original logic puzzle by Salimah Ismail. Decode the emojis to reveal the hidden phrase and balance the equations.">
  <meta name="author" content="Salimah Ismail">
  <meta name="copyright" content="¬© 2025 Salimah Ismail. Licensed under CC BY-NC-ND 4.0 International.">
  <meta name="license" content="https://creativecommons.org/licenses/by-nc-nd/4.0/">
  <style>
    body {
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;
      margin: 2rem auto;
      max-width: 640px;
      line-height: 1.5;
      color: #222;
      background: #fdfdfd;
    }
    h1, h2 { text-align: center; }
    .note-box {
      background: #fff8db;
      border: 1px solid #e6d78a;
      border-radius: .5rem;
      padding: .75rem;
      margin-bottom: 1rem;
      font-size: .9rem;
    }
    .cipher-phrase-emoji {
      font-size:1.5rem;
      background:#fff;
      border:1px solid #ddd;
      border-radius:.5rem;
      padding:.75rem 1rem;
      display:flex;
      flex-wrap:wrap;
      gap:.5rem .6rem;
      box-shadow:0 1px 2px rgb(0 0 0 / .05);
    }
    .phrase-box {
      font-size:1.25rem;
      font-weight:600;
      letter-spacing:.05em;
      background:#fff;
      border:1px solid #ddd;
      border-radius:.5rem;
      padding:1rem;
      min-height:3rem;
      box-shadow:0 2px 4px rgb(0 0 0 / .06) inset;
      word-wrap:break-word;
      white-space:pre-wrap;
    }
    .mapping-row {
      display:grid;
      grid-template-columns:2rem 1fr 1fr;
      align-items:center;
      gap:.5rem;
      padding:.5rem .75rem;
      border:1px solid #ddd;
      border-radius:.5rem;
      background:#fafafa;
      margin-bottom:.5rem;
      box-shadow:0 1px 2px rgb(0 0 0 / .05);
    }
    .emoji-cell{font-size:1.5rem;text-align:center;}
    label{display:block;font-size:.7rem;font-weight:500;color:#555;margin-bottom:.25rem;}
    input[type="text"],input[type="number"]{
      width:100%;
      font-size:1rem;
      padding:.4rem .5rem;
      border:1px solid #bbb;
      border-radius:.4rem;
      font-family:inherit;
      background:white;
    }
    input:focus{border-color:#000;outline:none;}
    .section-title{
      font-size:1rem;
      font-weight:600;
      margin:1.5rem 0 .5rem;
      text-transform:uppercase;
      letter-spacing:.03em;
      color:#444;
    }
    .equations-wrapper{
      border:1px solid #ddd;
      border-radius:.5rem;
      background:#fff;
      box-shadow:0 1px 2px rgb(0 0 0 / .05);
    }
    .equation-row{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:1rem;
      padding:.75rem .75rem;
      border-bottom:1px solid #eee;
      font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
      font-size:.9rem;
      line-height:1.3;
    }
    .equation-row:last-child{border-bottom:none;}
    .eq-right{text-align:right;min-width:7rem;font-weight:500;}
    .status-ok{color:#108a00;}
    .status-bad{color:#b00020;}
    .win-box{
      margin-top:1rem;
      border-radius:.75rem;
      padding:1rem;
      font-weight:600;
      text-align:center;
      font-size:1rem;
      display:none;
      background:#e6ffe6;
      border:2px solid #108a00;
      color:#0a4f00;
      box-shadow:0 4px 10px rgb(0 0 0 / .08);
    }
    footer{
      margin-top:2rem;
      font-size:.8rem;
      text-align:center;
      color:#666;
    }
    footer a{
      color:#555;
      text-decoration:none;
    }
  </style>
</head>
<body>
  <h1>Emoji Cipher‚Ñ¢</h1>
  <h2>Puzzle</h2>

  <div class="note-box">
    Each emoji stands for <strong>one letter</strong> and <strong>one number</strong>.<br>
    Decode the secret phrase <em>and</em> make all the equations true.
  </div>

  <div class="section-title">Secret Phrase (in emojis)</div>
  <div class="cipher-phrase-emoji" id="emojiPhraseDisplay"></div>

  <div class="section-title">Check the Math</div>
  <div class="equations-wrapper" id="equationsArea"></div>

  <div class="section-title">Your Decoded Phrase</div>
  <div class="phrase-box" id="decodedPreview">_ _ _</div>

  <div class="section-title">Assign Letters and Numbers</div>
  <div id="mappingInputs"></div>

  <div class="win-box" id="winBox">
    ‚úÖ You solved it!
  </div>

  <footer>
    Emoji Cipher‚Ñ¢ ¬© 2025 Salimah Ismail.<br>
    Licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0 International</a>.
  </footer>

  <script>
  (function(){

    // PUZZLES ARRAY: All 10 levels
    const PUZZLES = [
      // 1. COOL GAME BRO
      {
        phrase: "COOL GAME BRO",
        phraseEmojis: [
          "ü¶ä","ü™ê","ü™ê","üê∏","‚¨ú",
          "üöÄ","üåµ","üé≤","üîÆ","‚¨ú",
          "üßä","üåµ","ü™ê"
        ],
        uniqueEmojis: ["ü¶ä","ü™ê","üê∏","üöÄ","üåµ","üé≤","üîÆ","üßä"],
        // numbers:
        // ü¶ä C=3, ü™ê O=8, üê∏ L=4, üöÄ G=7,
        // üåµ A=1, üé≤ M=6, üîÆ E=2, üßä B=5, (R uses üåµ? we reused A here, that's ok for level 1 simplicity)
        equations: [
          { left:["ü¶ä","+","ü™ê"], target:11 },          //3+8
          { left:["ü™ê","+","üê∏"], target:12 },          //8+4
          { left:["üöÄ","+","üåµ","+","üé≤"], target:14 }, //7+1+6
          { left:["üé≤","+","üîÆ"], target:8 },          //6+2
          { left:["üßä","+","üåµ"], target:6 }           //5+1
        ]
      },

      // 2. IT IS NAP TIME
      {
        phrase: "IT IS NAP TIME",
        phraseEmojis: [
          "üçÑ","üßä","‚¨ú",
          "üçÑ","üê∏","‚¨ú",
          "üêô","üåµ","ü¶ä","‚¨ú",
          "üßä","üçÑ","üé≤","üîÆ"
        ],
        uniqueEmojis: ["üçÑ","üßä","üê∏","üêô","üåµ","ü¶ä","üé≤","üîÆ"],
        // üçÑ I=4, üßä T=9, üê∏ S=2, üêô N=5,
        // üåµ A=1, ü¶ä P=7, üé≤ M=6, üîÆ E=3
        equations: [
          { left:["üçÑ","+","üßä"], target:13 },   //4+9
          { left:["üê∏","+","üêô"], target:7 },    //2+5
          { left:["üåµ","+","ü¶ä"], target:8 },    //1+7
          { left:["üé≤","+","üîÆ"], target:9 },    //6+3
          { left:["üßä","+","üé≤"], target:15 }    //9+6
        ]
      },

      // 3. HERBAL OR VERBAL TEA
      {
        phrase: "HERBAL OR VERBAL TEA",
        phraseEmojis: [
          "ü™ê","üîÆ","üåä","üöÄ","üåµ","üêô","‚¨ú",
          "üé≤","üåä","‚¨ú",
          "ü¶ä","üîÆ","üåä","üöÄ","üåµ","üêô","‚¨ú",
          "üßä","üîÆ","üåµ"
        ],
        uniqueEmojis: ["ü™ê","üîÆ","üåä","üöÄ","üåµ","üêô","üé≤","ü¶ä","üßä"],
        // ü™ê H=4, üîÆ E=2, üåä R=9, üöÄ B=5,
        // üåµ A=1, üêô L=7, üé≤ O=6, ü¶ä V=8, üßä T=3
        equations: [
          { left:["ü™ê","+","üîÆ"], target:6 },        //4+2
          { left:["üåä","+","üöÄ"], target:14 },       //9+5
          { left:["üåµ","+","üêô"], target:8 },        //1+7
          { left:["üé≤","+","üåä"], target:15 },       //6+9
          { left:["ü¶ä","+","üîÆ"], target:10 },       //8+2
          { left:["üßä","+","üîÆ","+","üåµ"], target:6 } //3+2+1
        ]
      },

      // 4. ADDICTED TO RAGEAHOL
      {
        phrase: "ADDICTED TO RAGEAHOL",
        phraseEmojis: [
          "üåµ","üé≤","üé≤","üçÑ","ü¶ä","üßä","üîÆ","üé≤","‚¨ú",
          "üßä","üé≤","‚¨ú",
          "üåä","üåµ","üöÄ","üîÆ","üåµ","üê∏","üé≤","üêô"
        ],
        uniqueEmojis: ["üåµ","üé≤","üçÑ","ü¶ä","üßä","üîÆ","üåä","üöÄ","üê∏","üêô"],
        // üåµ A=1, üé≤ D=7, üçÑ I=4, ü¶ä C=8,
        // üßä T=9, üîÆ E=3, üåä R=5, üöÄ G=2,
        // üê∏ H=4, üêô L=8 (reuse nums allowed)
        equations: [
          { left:["üåµ","+","üé≤"], target:8 },        //1+7
          { left:["üé≤","+","üçÑ"], target:11 },       //7+4
          { left:["ü¶ä","+","üßä"], target:17 },       //8+9
          { left:["üîÆ","+","üé≤"], target:10 },       //3+7
          { left:["üåä","+","üåµ","+","üöÄ"], target:8 },//5+1+2
          { left:["üê∏","+","üé≤"], target:11 },       //4+7
          { left:["üé≤","+","üêô"], target:15 }        //7+8
        ]
      },

      // 5. I BARELY EVEN KNOW HER
      {
        phrase: "I BARELY EVEN KNOW HER",
        phraseEmojis: [
          "üçÑ","‚¨ú",
          "üöÄ","üåµ","üåä","üîÆ","üêô","üßä","‚¨ú",
          "üîÆ","üé≤","üîÆ","üêô","‚¨ú",
          "üßä","üêô","üé≤","ü™ê","‚¨ú",
          "üê∏","üîÆ","üåä"
        ],
        uniqueEmojis: ["üçÑ","üöÄ","üåµ","üåä","üîÆ","üêô","üßä","üé≤","ü™ê","üê∏"],
        // üçÑ I=4, üöÄ B=6, üåµ A=1, üåä R=9,
        // üîÆ E=2, üêô L=7, üßä Y=8,
        // üé≤ V=5, ü™ê N=3, üê∏ K=4
        equations: [
          { left:["üçÑ","+","üöÄ"], target:10 },       //4+6
          { left:["üåµ","+","üåä"], target:10 },       //1+9
          { left:["üîÆ","+","üêô","+","üßä"], target:17 }, //2+7+8
          { left:["üîÆ","+","üé≤"], target:7 },        //2+5
          { left:["üé≤","+","ü™ê"], target:8 },        //5+3
          { left:["üê∏","+","üîÆ"], target:6 }         //4+2
        ]
      },

      // 6. SEND MORE KITTENS
      {
        phrase: "SEND MORE KITTENS",
        phraseEmojis: [
          "ü¶ä","üê∏","ü™ê","üé≤","‚¨ú",
          "üöÄ","üîÆ","üåµ","üê∏","‚¨ú",
          "üßä","üêô","ü¶¥","ü¶¥","üê∏","ü™º","üêç"
        ],
        uniqueEmojis: ["ü¶ä","üê∏","ü™ê","üé≤","üöÄ","üîÆ","üåµ","üßä","üêô","ü¶¥","ü™º","üêç"],
        // ü¶ä S=6, üê∏ E=2, ü™ê N=5, üé≤ D=4,
        // üöÄ M=7, üîÆ O=8, üåµ R=3,
        // üßä K=9, üêô I=1, ü¶¥ T=4,
        // ü™º N=5, üêç S=6
        equations: [
          { left:["ü¶ä","+","üê∏"], target:8 },             //6+2
          { left:["üê∏","+","ü™ê","+","üé≤"], target:11 },   //2+5+4
          { left:["üöÄ","+","üîÆ"], target:15 },           //7+8
          { left:["üåµ","+","üê∏"], target:5 },            //3+2
          { left:["üßä","+","üêô"], target:10 },           //9+1
          { left:["ü¶¥","+","ü¶¥"], target:8 },            //4+4
          { left:["üê∏","+","ü™º","+","üêç"], target:13 }    //2+5+6
        ]
      },

      // 7. CAUGHT A VIBE
      {
        phrase: "CAUGHT A VIBE",
        phraseEmojis: [
          "üåµ","üêô","üöÄ","ü¶ä","üê∏","üßä","‚¨ú",
          "üêô","‚¨ú",
          "üé≤","üîÆ","ü™ê","ü¶¥"
        ],
        uniqueEmojis: ["üåµ","üêô","üöÄ","ü¶ä","üê∏","üßä","üé≤","üîÆ","ü™ê","ü¶¥"],
        // üåµ C=2, üêô A=1, üöÄ U=6, ü¶ä G=7,
        // üê∏ H=4, üßä T=9,
        // üé≤ V=8, üîÆ I=3, ü™ê B=5, ü¶¥ E=2
        equations: [
          { left:["üåµ","+","üêô"], target:3 },      //2+1
          { left:["üöÄ","+","ü¶ä"], target:13 },     //6+7
          { left:["üê∏","+","üßä"], target:13 },     //4+9
          { left:["üé≤","+","üîÆ"], target:11 },     //8+3
          { left:["ü™ê","+","ü¶¥"], target:7 },      //5+2
          { left:["üêô","+","üé≤"], target:9 }       //1+8
        ]
      },

      // 8. A CENTER FOR ANTS
      {
        phrase: "A CENTER FOR ANTS",
        phraseEmojis: [
          "üêô","‚¨ú",
          "üßä","üåµ","ü¶¥","üîÆ","üåµ","üé≤","‚¨ú",
          "ü™ê","üê∏","üé≤","‚¨ú",
          "üêô","ü¶¥","üîÆ","üöÄ"
        ],
        uniqueEmojis: ["üêô","üßä","üåµ","ü¶¥","üîÆ","üé≤","ü™ê","üê∏","üöÄ"],
        // üêô A=1, üßä C=6, üåµ E=2, ü¶¥ N=5,
        // üîÆ T=9, üé≤ R=4, ü™ê F=7,
        // üê∏ O=8, üöÄ S=3
        equations: [
          { left:["üßä","+","üåµ"], target:8 },           //6+2
          { left:["ü¶¥","+","üîÆ"], target:14 },         //5+9
          { left:["üåµ","+","üé≤"], target:6 },          //2+4
          { left:["ü™ê","+","üê∏"], target:15 },         //7+8
          { left:["üé≤","+","üêô"], target:5 },          //4+1
          { left:["üêô","+","ü¶¥","+","üîÆ","+","üöÄ"], target:18 } //1+5+9+3
        ]
      },

      // 9. BY DOG I MEAN SON
      {
        phrase: "BY DOG I MEAN SON",
        phraseEmojis: [
          "üßä","üé≤","‚¨ú",
          "üê∏","ü™ê","ü¶ä","‚¨ú",
          "üçÑ","‚¨ú",
          "üöÄ","üåµ","ü™º","üîÆ","‚¨ú",
          "üêô","ü™ê","üîÆ"
        ],
        uniqueEmojis: ["üßä","üé≤","üê∏","ü™ê","ü¶ä","üçÑ","üöÄ","üåµ","ü™º","üîÆ","üêô"],
        // üßä B=4, üé≤ Y=7, üê∏ D=8, ü™ê O=6,
        // ü¶ä G=5, üçÑ I=3, üöÄ M=9, üåµ E=2,
        // ü™º A=1, üîÆ N=4, üêô S=6
        equations: [
          { left:["üßä","+","üé≤"], target:11 },        //4+7
          { left:["üê∏","+","ü™ê"], target:14 },        //8+6
          { left:["ü¶ä","+","üçÑ"], target:8 },         //5+3
          { left:["üöÄ","+","üåµ"], target:11 },        //9+2
          { left:["ü™º","+","üîÆ"], target:5 },         //1+4
          { left:["üêô","+","ü™ê","+","üîÆ"], target:16 } //6+6+4
        ]
      },

      // 10. GREAT WORK SO FAR
      {
        phrase: "GREAT WORK SO FAR",
        phraseEmojis: [
          "ü¶ä","üåµ","üßä","üé≤","üîÆ","‚¨ú",
          "üöÄ","üê∏","üåµ","ü¶¥","‚¨ú",
          "üêô","üê∏","‚¨ú",
          "üçÑ","üé≤","üåµ"
        ],
        uniqueEmojis: ["ü¶ä","üåµ","üßä","üé≤","üîÆ","üöÄ","üê∏","ü¶¥","üêô","üçÑ"],
        // ü¶ä G=8, üåµ R=4, üßä E=2, üé≤ A=1,
        // üîÆ T=9, üöÄ W=6, üê∏ O=7,
        // ü¶¥ K=5, üêô S=3, üçÑ F=4
        equations: [
          { left:["ü¶ä","+","üåµ"], target:12 },        //8+4
          { left:["üßä","+","üé≤"], target:3 },         //2+1
          { left:["üîÆ","+","üöÄ"], target:15 },        //9+6
          { left:["üê∏","+","üåµ"], target:11 },        //7+4
          { left:["ü¶¥","+","üêô"], target:8 },         //5+3
          { left:["üçÑ","+","üé≤","+","üåµ"], target:9 }  //4+1+4
        ]
      }
    ];

    // Pick a random puzzle from all 10
    const currentPuzzle = PUZZLES[Math.floor(Math.random() * PUZZLES.length)];

    // Track player's guesses
    const playerState = {};
    currentPuzzle.uniqueEmojis.forEach(e=>{
      playerState[e] = { letter:"", number:"" };
    });

    // DOM references
    const phraseDisplay   = document.getElementById("emojiPhraseDisplay");
    const equationsArea   = document.getElementById("equationsArea");
    const previewBox      = document.getElementById("decodedPreview");
    const mappingContainer= document.getElementById("mappingInputs");
    const winBox          = document.getElementById("winBox");

    function renderEmojiPhrase(){
      phraseDisplay.innerHTML = "";
      currentPuzzle.phraseEmojis.forEach(em=>{
        const span=document.createElement("span");
        span.textContent=em;
        phraseDisplay.appendChild(span);
      });
    }

    function renderMappingInputs(){
      mappingContainer.innerHTML = "";
      currentPuzzle.uniqueEmojis.forEach(em=>{
        const row=document.createElement("div");
        row.className="mapping-row";

        const emojiCell=document.createElement("div");
        emojiCell.className="emoji-cell";
        emojiCell.textContent=em;
        row.appendChild(emojiCell);

        const letterWrap=document.createElement("div");
        const letterLabel=document.createElement("label");
        letterLabel.textContent="Letter";
        const letterInput=document.createElement("input");
        letterInput.type="text";
        letterInput.maxLength=1;
        letterInput.dataset.emoji=em;
        letterInput.dataset.field="letter";
        letterInput.addEventListener("input",handleInputChange);
        letterWrap.appendChild(letterLabel);
        letterWrap.appendChild(letterInput);

        const numWrap=document.createElement("div");
        const numLabel=document.createElement("label");
        numLabel.textContent="Number (0-9)";
        const numInput=document.createElement("input");
        numInput.type="number";
        numInput.min="0";
        numInput.max="9";
        numInput.dataset.emoji=em;
        numInput.dataset.field="number";
        numInput.addEventListener("input",handleInputChange);
        numWrap.appendChild(numLabel);
        numWrap.appendChild(numInput);

        row.appendChild(letterWrap);
        row.appendChild(numWrap);

        mappingContainer.appendChild(row);
      });
    }

    function handleInputChange(e){
      const em = e.target.dataset.emoji;
      const field = e.target.dataset.field;
      let val = e.target.value;

      if(field==="letter"){
        val = val.toUpperCase().replace(/[^A-Z ]/g,"").slice(0,1);
        e.target.value = val;
      }

      if(field==="number"){
        if(val!==""){
          let n=parseInt(val,10);
          if(isNaN(n)) n="";
          if(n<0) n=0;
          if(n>9) n=9;
          e.target.value = n;
          val = e.target.value;
        }
      }

      playerState[em][field] = val;
      update();
    }

    function buildPreviewString(){
      let out = "";
      currentPuzzle.phraseEmojis.forEach(em=>{
        if(em==="‚¨ú"){
          out += " ";
        } else {
          const guess = playerState[em]?.letter || "";
          out += guess ? guess : "_";
        }
      });
      return out;
    }

    function renderPreview(){
      previewBox.textContent = buildPreviewString();
    }

    function evaluateEquation(eqObj){
      let pieces = [];
      let valid  = true;

      eqObj.left.forEach(token=>{
        if(token==="+"){
          pieces.push("+");
        } else {
          const guessNum = playerState[token]?.number;
          if(!guessNum && guessNum!==0){
            pieces.push("?");
            valid = false;
          } else {
            pieces.push(String(guessNum));
          }
        }
      });

      let computed = null;
      if(valid){
        computed = 0;
        pieces.forEach(p=>{
          if(p!=="+"){
            const n = parseInt(p,10);
            if(isNaN(n)){
              valid=false;
            } else {
              computed += n;
            }
          }
        });
        if(computed !== eqObj.target){
          valid = false;
        }
      }

      const displayStr = pieces.join(" ")+" = "+eqObj.target+" "+(valid?"‚úÖ":"‚ùå");
      return {
        html: "<span class='"+(valid?"status-ok":"status-bad")+"'>"+displayStr+"</span>",
        ok: valid
      };
    }

    function renderEquations(){
      equationsArea.innerHTML = "";
      currentPuzzle.equations.forEach(eq=>{
        const row=document.createElement("div");
        row.className="equation-row";

        const left=document.createElement("div");
        left.textContent = eq.left.join(" ")+" = "+eq.target;

        const right=document.createElement("div");
        right.className="eq-right";
        const res=evaluateEquation(eq);
        right.innerHTML = res.html;

        row.appendChild(left);
        row.appendChild(right);
        equationsArea.appendChild(row);
      });
    }

    function checkWin(){
      const solvedPhrase = buildPreviewString() === currentPuzzle.phrase;
      let allEqOk = true;
      for(const eq of currentPuzzle.equations){
        if(!evaluateEquation(eq).ok){
          allEqOk = false;
          break;
        }
      }
      if(solvedPhrase && allEqOk){
        winBox.style.display = "block";
      } else {
        winBox.style.display = "none";
      }
    }

    function update(){
      renderPreview();
      renderEquations();
      checkWin();
    }

    function init(){
      renderEmojiPhrase();
      renderMappingInputs();
      update();
    }

    init();

  })();
  </script>
</body>
</html>
