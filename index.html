<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emoji Cipher™ – Puzzle</title>
  <meta name="description" content="Emoji Cipher™ is an original logic puzzle by Salimah Ismail. Decode the emojis to reveal the hidden phrase and balance the equations.">
  <meta name="author" content="Salimah Ismail">
  <meta name="copyright" content="© 2025 Salimah Ismail. Licensed under CC BY-NC-ND 4.0 International.">
  <meta name="license" content="https://creativecommons.org/licenses/by-nc-nd/4.0/">
  <style>
    body {
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;
      margin: 2rem auto;
      max-width: 640px;
      line-height: 1.5;
      color: #222;
      background: #fdfdfd;
    }
    h1, h2 { text-align: center; }
    .note-box {
      background: #fff8db;
      border: 1px solid #e6d78a;
      border-radius: .5rem;
      padding: .75rem;
      margin-bottom: 1rem;
      font-size: .9rem;
    }
    .cipher-phrase-emoji {
      font-size:1.5rem;
      background:#fff;
      border:1px solid #ddd;
      border-radius:.5rem;
      padding:.75rem 1rem;
      display:flex;
      flex-wrap:wrap;
      gap:.5rem .6rem;
      box-shadow:0 1px 2px rgb(0 0 0 / .05);
    }
    .phrase-box {
      font-size:1.25rem;
      font-weight:600;
      letter-spacing:.05em;
      background:#fff;
      border:1px solid #ddd;
      border-radius:.5rem;
      padding:1rem;
      min-height:3rem;
      box-shadow:0 2px 4px rgb(0 0 0 / .06) inset;
      word-wrap:break-word;
      white-space:pre-wrap;
    }
    .mapping-row {
      display:grid;
      grid-template-columns:2rem 1fr 1fr;
      align-items:center;
      gap:.5rem;
      padding:.5rem .75rem;
      border:1px solid #ddd;
      border-radius:.5rem;
      background:#fafafa;
      margin-bottom:.5rem;
      box-shadow:0 1px 2px rgb(0 0 0 / .05);
    }
    .emoji-cell{font-size:1.5rem;text-align:center;}
    label{display:block;font-size:.7rem;font-weight:500;color:#555;margin-bottom:.25rem;}
    input[type="text"],input[type="number"]{
      width:100%;
      font-size:1rem;
      padding:.4rem .5rem;
      border:1px solid #bbb;
      border-radius:.4rem;
      font-family:inherit;
      background:white;
    }
    input:focus{border-color:#000;outline:none;}
    .section-title{
      font-size:1rem;
      font-weight:600;
      margin:1.5rem 0 .5rem;
      text-transform:uppercase;
      letter-spacing:.03em;
      color:#444;
    }
    .equations-wrapper{
      border:1px solid #ddd;
      border-radius:.5rem;
      background:#fff;
      box-shadow:0 1px 2px rgb(0 0 0 / .05);
    }
    .equation-row{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:1rem;
      padding:.75rem .75rem;
      border-bottom:1px solid #eee;
      font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
      font-size:.9rem;
      line-height:1.3;
    }
    .equation-row:last-child{border-bottom:none;}
    .eq-right{text-align:right;min-width:7rem;font-weight:500;}
    .status-ok{color:#108a00;}
    .status-bad{color:#b00020;}
    .win-box{
      margin-top:1rem;
      border-radius:.75rem;
      padding:1rem;
      font-weight:600;
      text-align:center;
      font-size:1rem;
      display:none;
      background:#e6ffe6;
      border:2px solid #108a00;
      color:#0a4f00;
      box-shadow:0 4px 10px rgb(0 0 0 / .08);
    }
    footer{
      margin-top:2rem;
      font-size:.8rem;
      text-align:center;
      color:#666;
    }
    footer a{
      color:#555;
      text-decoration:none;
    }
  </style>
</head>
<body>
  <h1>Emoji Cipher™</h1>
  <h2>Puzzle</h2>

  <div class="note-box">
    Each emoji stands for <strong>one letter</strong> and <strong>one number</strong>.<br>
    Decode the secret phrase <em>and</em> make all the equations true.
  </div>

  <div class="section-title">Secret Phrase (in emojis)</div>
  <div class="cipher-phrase-emoji" id="emojiPhraseDisplay"></div>

  <div class="section-title">Check the Math</div>
  <div class="equations-wrapper" id="equationsArea"></div>

  <div class="section-title">Your Decoded Phrase</div>
  <div class="phrase-box" id="decodedPreview">_ _ _</div>

  <div class="section-title">Assign Letters and Numbers</div>
  <div id="mappingInputs"></div>

  <div class="win-box" id="winBox">
    ✅ You solved it!
  </div>

  <footer>
    Emoji Cipher™ © 2025 Salimah Ismail.<br>
    Licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0 International</a>.
  </footer>

  <script>
  (function(){

    // PUZZLES ARRAY: All 10 levels
    const PUZZLES = [
      // 1. COOL GAME BRO
      {
        phrase: "COOL GAME BRO",
        phraseEmojis: [
          "🦊","🪐","🪐","🐸","⬜",
          "🚀","🌵","🎲","🔮","⬜",
          "🧊","🌵","🪐"
        ],
        uniqueEmojis: ["🦊","🪐","🐸","🚀","🌵","🎲","🔮","🧊"],
        // numbers:
        // 🦊 C=3, 🪐 O=8, 🐸 L=4, 🚀 G=7,
        // 🌵 A=1, 🎲 M=6, 🔮 E=2, 🧊 B=5, (R uses 🌵? we reused A here, that's ok for level 1 simplicity)
        equations: [
          { left:["🦊","+","🪐"], target:11 },          //3+8
          { left:["🪐","+","🐸"], target:12 },          //8+4
          { left:["🚀","+","🌵","+","🎲"], target:14 }, //7+1+6
          { left:["🎲","+","🔮"], target:8 },          //6+2
          { left:["🧊","+","🌵"], target:6 }           //5+1
        ]
      },

      // 2. IT IS NAP TIME
      {
        phrase: "IT IS NAP TIME",
        phraseEmojis: [
          "🍄","🧊","⬜",
          "🍄","🐸","⬜",
          "🐙","🌵","🦊","⬜",
          "🧊","🍄","🎲","🔮"
        ],
        uniqueEmojis: ["🍄","🧊","🐸","🐙","🌵","🦊","🎲","🔮"],
        // 🍄 I=4, 🧊 T=9, 🐸 S=2, 🐙 N=5,
        // 🌵 A=1, 🦊 P=7, 🎲 M=6, 🔮 E=3
        equations: [
          { left:["🍄","+","🧊"], target:13 },   //4+9
          { left:["🐸","+","🐙"], target:7 },    //2+5
          { left:["🌵","+","🦊"], target:8 },    //1+7
          { left:["🎲","+","🔮"], target:9 },    //6+3
          { left:["🧊","+","🎲"], target:15 }    //9+6
        ]
      },

      // 3. HERBAL OR VERBAL TEA
      {
        phrase: "HERBAL OR VERBAL TEA",
        phraseEmojis: [
          "🪐","🔮","🌊","🚀","🌵","🐙","⬜",
          "🎲","🌊","⬜",
          "🦊","🔮","🌊","🚀","🌵","🐙","⬜",
          "🧊","🔮","🌵"
        ],
        uniqueEmojis: ["🪐","🔮","🌊","🚀","🌵","🐙","🎲","🦊","🧊"],
        // 🪐 H=4, 🔮 E=2, 🌊 R=9, 🚀 B=5,
        // 🌵 A=1, 🐙 L=7, 🎲 O=6, 🦊 V=8, 🧊 T=3
        equations: [
          { left:["🪐","+","🔮"], target:6 },        //4+2
          { left:["🌊","+","🚀"], target:14 },       //9+5
          { left:["🌵","+","🐙"], target:8 },        //1+7
          { left:["🎲","+","🌊"], target:15 },       //6+9
          { left:["🦊","+","🔮"], target:10 },       //8+2
          { left:["🧊","+","🔮","+","🌵"], target:6 } //3+2+1
        ]
      },

      // 4. ADDICTED TO RAGEAHOL
      {
        phrase: "ADDICTED TO RAGEAHOL",
        phraseEmojis: [
          "🌵","🎲","🎲","🍄","🦊","🧊","🔮","🎲","⬜",
